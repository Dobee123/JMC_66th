<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>황새 럭키드로우</title>
    <style>
        body {
            text-align: center;
            font-family: Arial, sans-serif;
            background-color: #000066;
        }
        canvas {
            background-color: #000066;
        }
        button {
            margin-top: 20px;
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
        }
    </style>
</head>
<body>

    <h1 style="color: #ffffff; display: flex; align-items: center; justify-content: center; gap: 10px;">
        <img src='https://ifh.cc/g/ShK5ra.png
' alt='logo' style='height: 100px;'>
        황새 럭키드로우
        <img src='https://ifh.cc/g/ShK5ra.png
' alt='logo' style='height: 100px;'>
    </h1>
    <canvas id="gameCanvas"></canvas>
    <br>
    <button onclick="shuffleAndPick()" style="position: absolute; top: 10px; right: 10px;">뽑기!</button>

    <script>
        const cardWidth = 120;
        const cardHeight = 160;
        const padding = 20;
        const cols = 6;
        let isShuffling = false;
        let selectedCard = null;
        let pickedCards = new Set();

        // 이름 리스트
        const names = [
            "윤선이", "임채무", "박정현", "이사야", "김예지", "박주희", "이경미", "김시연", "차정환", "임용균",
            "박다빈", "김희진", "오민주", "강지희", "이슬기", "이창범", "이나정", "이지훈", "김수미", "이정훈",
            "안혜진", "서지원", "정석준", "박지선", "서재원", "홍성원", "은영미", "이성민", "강지희", "배창학",
            "장현주", "박정윤", "오노영", "유동한", "김동영", "최현종", "이기종", "안성수", "권우현", "김형도",
            "안태건", "박완준", "정유미", "김미립", "박소연", "김나예", "배지윤", "김윤영", "이윤주", "주혜승"
        ];
        
        const rows = Math.ceil(names.length / cols);
        
        const canvas = document.getElementById("gameCanvas");
        const ctx = canvas.getContext("2d");
        canvas.width = cols * (cardWidth + padding) + 50;
        canvas.height = rows * (cardHeight + padding) + 50;
        
        let cards = names.map((name, index) => ({
            name: name,
            x: (index % cols) * (cardWidth + padding) + 50,
            y: Math.floor(index / cols) * (cardHeight + padding) + 50
        }));
        
        function drawCards() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            cards.forEach(card => {
                ctx.fillStyle = pickedCards.has(card.name) ? "#ddd" : "white";
                ctx.fillRect(card.x, card.y, cardWidth, cardHeight);
                ctx.strokeStyle = "black";
                ctx.strokeRect(card.x, card.y, cardWidth, cardHeight);
                ctx.fillStyle = "black";
                ctx.font = "20px Arial";
                ctx.textAlign = "center";
                ctx.fillText(card.name, card.x + cardWidth / 2, card.y + cardHeight / 2 + 10);
            });

            if (selectedCard) {
                ctx.fillStyle = "white";
                ctx.fillRect(canvas.width / 2 - 120, canvas.height / 2 - 180, 240, 360);
                ctx.strokeStyle = "black";
                ctx.strokeRect(canvas.width / 2 - 120, canvas.height / 2 - 180, 240, 360);
                ctx.fillStyle = "black";
                ctx.font = "40px Arial";
                ctx.textAlign = "center";
                ctx.fillText(selectedCard.name, canvas.width / 2, canvas.height / 2);
            }
        }

        async function shuffleAndPick() {
            if (isShuffling) return;
            isShuffling = true;
            selectedCard = null;
            await shuffleCards();

            setTimeout(() => {
                let availableCards = cards.filter(c => !pickedCards.has(c.name));
                if (availableCards.length === 0) return;
                let randomIndex = Math.floor(Math.random() * availableCards.length);
                selectedCard = { ...availableCards[randomIndex] };
                pickedCards.add(selectedCard.name);
                drawCards();
                isShuffling = false;
            }, 500);
        }

        function shuffleCards() {
            return new Promise(resolve => {
                let shuffleCount = 10;
                let interval = setInterval(() => {
                    for (let i = 0; i < cards.length; i++) {
                        let randomIndex = Math.floor(Math.random() * cards.length);
                        [cards[i].x, cards[randomIndex].x] = [cards[randomIndex].x, cards[i].x];
                        [cards[i].y, cards[randomIndex].y] = [cards[randomIndex].y, cards[i].y];
                    }
                    drawCards();
                    shuffleCount--;
                    if (shuffleCount === 0) {
                        clearInterval(interval);
                        resolve();
                    }
                }, 200);
            });
        }

        drawCards();
    </script>
</body>
</html>
